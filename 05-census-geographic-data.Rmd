# Census geographic data and applications in R

As discussed in Chapters 1 and 3, Census and ACS data are associated with _geographies_, which are units at which the data are aggregated.  These defined geographies are represented in the US Census Bureau's TIGER/Line database.  The TIGER/Line database includes geometric representations of Census Bureau geographies made available as _shapefiles_, a common format for encoding geographic data. 

The TIGER/Line shapefiles include three general types of data: 

* _Legal entities_, which are geographies that have official legal standing in the United States.  These include states and counties.  
* _Statistical entities_, which are geographies defined by the Census Bureau for purposes of data collection and dissemination.  Examples of statistical entities include Census tracts and block groups.  
* _Geographic features_, which are geographic datasets that are not linked with aggregate demographic data from the Census Bureau.  These datasets include roads and water features.  

Traditionally, TIGER/Line shapefiles are downloaded from a web interface as zipped folders, then unzipped for use in a Geographic Information System (GIS) or other software that can work with geographic data.  However, the R package __tigris__ allows R users to access these datasets directly from their R sessions without having to go through these steps.  

This chapter will cover the core functionality of the tigris package for working with Census geographic data in R.  In doing so, it will highlight the new __sf__ package (Pebesma 2017) for representing spatial data as R objects.  

## Basic usage of tigris

The tigris R package simplifies the process for R users of obtaining and using Census geographic datasets.  Functions in tigris _download_ a requested Census geographic dataset from the US Census Bureau website, then _load_ the dataset into R as a spatial object.  Generally speaking, each type of geographic dataset available in the Census Bureau's TIGER/Line database is available with a corresponding function in tigris.  For example, the `states()` function can be run without arguments to download a boundary file of US states and state equivalents. 
```{r}
library(tigris)

st <- states()

plot(st)
```

By default, tigris returns an object of class `SpatialPolygonsDataFrame` from the __sp__ package when the function `states()` is called representing the boundaries of US states and territories.  

Other Census datasets may be available by state or by county within the state.  In some cases, this subsetting is optional; in other cases, `state` and/or `county` arguments will be required.  For example, the `counties()` function can be used to obtain county boundaries for the entirety of the United States, but also can be used with the `state` argument to return only those counties from a specific state, like New Mexico.  

```{r}
nm_counties <- counties("NM")

plot(nm_counties)
```

In this case the state postal code `"NM"` is used to instruct tigris to subset the counties dataset for counties in New Mexico.  The full name of the state, `"New Mexico"`, would work the same here as well.  Obtaining Census shapefiles programmatically requires inputting the Federal Information Processing Standard (FIPS) code; however, tigris translates postal codes and names of states and counties to their FIPS codes so that R users do not have to look them up.  

States and counties are examples of _legal entities_ that can be accessed with tigris.  _Statistical entities_ and _geographic features_ are similarly accessible if they exist in the TIGER/Line database.  For example, a user might request Census tract boundaries for a given county in New Mexico with the corresponding `tracts()` function.  

```{r}
la_tracts <- tracts("NM", "Los Alamos")

plot(la_tracts)
```

Several geographic features are available in tigris as well, including roads and water features which can be useful for thematic mapping.  For example, a user could request road data for Los Alamos County with the `roads()` function.  

```{r}
la_water <- area_water("NM", "Los Alamos")

plot(la_water)
```


## Tigris and simple features


## Cartographic boundary shapefiles


## Plotting data 
